#!/bin/bash
# YouTubeä¸‹è½½å™¨ä¸€é”®æ‰§è¡Œè„šæœ¬ - æ”¹è¿›ç‰ˆæœ¬
# ä½¿ç”¨ä¸¤é˜¶æ®µä¸‹è½½ç­–ç•¥ï¼šå…ˆä¸‹è½½è¾ƒé•¿ç‰‡æ®µï¼Œå†ç²¾ç¡®åˆ‡å‰²

# æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
if [[ "$1" == "--help" || "$1" == "-h" ]]; then
    echo "ğŸ¯ YouTubeä¸‹è½½å™¨ - æ”¹è¿›ç‰ˆæœ¬"
    echo ""
    echo "ä½¿ç”¨æ–¹æ³•:"
    echo "  $0 URL --start æ—¶é—´ --end æ—¶é—´ [é€‰é¡¹]"
    echo ""
    echo "ç¤ºä¾‹:"
    echo "  $0 \"https://www.youtube.com/watch?v=yJqOe-tKj-U\" --start 2:00 --end 3:00"
    echo "  $0 \"URL\" --start 120 --end 180 --no-video"
    echo "  $0 \"URL\" --start 2:00 --end 3:00 --sub-langs en,ja"
    echo ""
    echo "é€‰é¡¹:"
    echo "  --output-dir DIR     è¾“å‡ºç›®å½• (é»˜è®¤: downloads)"
    echo "  --no-video          ä¸ä¸‹è½½è§†é¢‘"
    echo "  --no-audio          ä¸ä¸‹è½½éŸ³é¢‘"
    echo "  --no-subtitles      ä¸ä¸‹è½½å­—å¹•"
    echo "  --sub-langs LANGS   å­—å¹•è¯­è¨€ï¼Œé€—å·åˆ†éš” (é»˜è®¤: zh-CN,zh,en,ja)"
    echo "                      ä¾‹å¦‚: en,ja æˆ– zh-CN,en"
    echo ""
    echo "æ”¹è¿›ç‰¹æ€§:"
    echo "  - ä½¿ç”¨ä¸¤é˜¶æ®µä¸‹è½½ç­–ç•¥ï¼Œç¡®ä¿ç²¾ç¡®çš„æ—¶é—´æ®µ"
    echo "  - è§†é¢‘è´¨é‡é™åˆ¶åœ¨480pä»¥ä¸‹ï¼ŒåŠ å¿«ä¸‹è½½é€Ÿåº¦"
    echo "  - ä½¿ç”¨HTTPä»£ç†ï¼Œæé«˜å…¼å®¹æ€§"
    exit 0
fi

# æ£€æŸ¥å‚æ•°
if [[ $# -lt 3 ]]; then
    echo "âŒ å‚æ•°ä¸è¶³"
    echo "ä½¿ç”¨: $0 --help æŸ¥çœ‹å¸®åŠ©"
    exit 1
fi

# æ‰§è¡Œä¸»è„šæœ¬
echo "ğŸš€ å¯åŠ¨YouTubeä¸‹è½½å™¨..."
python3 "$(dirname "$0")/src/youtube_downloader.py" "$@" || exit 1

echo "âœ… æ‰§è¡Œå®Œæˆï¼"
exit 0